## Notes about dbSnP database.

There are several versions of this floating around.  Here are collected notes, and md5sums of data files.  Will need to version and formalize this

Song Cao writes 2/14/19 about most recent version of his database:
    hg19: cb23ebfa578819ee51555b0efe32cbda /gscmnt/gc3027/dinglab/medseq/cosmic/00-All.brief.snp142.vcf
    hg38: a39513578c4a4a77961563fa358da6a0 /gscmnt/gc2737/ding/hg38_database/DBSNP/00-All.vcf
    Details about how this is generated:  MGI:/gscmnt/gc3027/dinglab/medseq/cosmic/work_log_hg38

    It appears that the filter used for mutecthg38 branch is /gscmnt/gc3027/dinglab/medseq/cosmic/00-All.HG38.pass.cosmic.vcf
    /Users/mwyczalk/Projects/TinDaisy/SomaticWrapper.working/somaticwrapper.pl has the following defintions:
        my $DB_SNP_NO_CHR="/gscmnt/gc2737/ding/hg38_database/DBSNP/00-All.vcf";
            - mutect
        my $DB_SNP="/gscmnt/gc2737/ding/hg38_database/DBSNP/00-All.chr.vcf";
        my $DB_COSMIC="/gscmnt/gc3027/dinglab/medseq/cosmic/CosmicAllMuts.HG38.sort.chr.vcf";
        my $DB_COSMIC_NO_CHR="/gscmnt/gc3027/dinglab/medseq/cosmic/CosmicAllMuts.HG38.sort.vcf";
            - mutect
        my $DB_SNP_NO_COSMIC="/gscmnt/gc3027/dinglab/medseq/cosmic/00-All.HG38.pass.cosmic.vcf";
            7b76221ec63ad79bbc518ce5c5e10acc  /gscmnt/gc3027/dinglab/medseq/cosmic/00-All.HG38.pass.cosmic.vcf
            - this is 122G size, 659,106,420 lines
            - strelka_snv
            - strelka_indel
            - varscan_snv
            - varscan_indel
            - pindel
            - See 00-All.5col.vcf.gz notes below

On denali: d536a720201d4510e2c9997196b3fc7a  /diskmnt/Projects/Users/hsun/data/dbsnp/00-All.brief.pass.cosmic.vcf.gz
Possibly older version:
    f532b39ba336356e8aefbd681f7c7584  /gscmnt/gc3027/dinglab/medseq/cosmic/00-All.brief.pass.cosmic.vcf
    equivalent, but with .gz and .gz.tbi:
    d536a720201d4510e2c9997196b3fc7a  /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/00-All.brief.pass.cosmic.vcf.gz

## `00-All.5col`
The file DB_SNP_NO_COSMIC above is very large.  Wish to create a 5-column gz file which should be much smaller, and allow for testing
on katmai.  This compression work and data is here:
    afa72f7ef2bc80615eddb3527d3bea40 /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/SomaticWrapper.version/00-All.5col.vcf.gz
    659,106,481 lines, 6.0Gb
This file (and its index) is copied to
    katmai:/diskmnt/Datasets/COSMIC/00-All.5col/00-All.5col.vcf.gz
It will be used for testing of TinDaisy runs.



### "B_FILTER" dbSnP - generated by MAW
"B_Filter" version of dbSnP db, created by MAW workflow on denali.
    Work directory: denali:/home/mwyczalk_test/src/SomaticWrapper/somaticwrapper/image.setup/B_Filter
    Data diretory: denali:/home/mwyczalk_test/data/docker/data/B_Filter
    hg19:  5d57b3acc092d4241a5f5ae92edf3752  /diskmnt/Projects/Users/mwyczalk/data/docker/data/B_Filter/dbsnp.noCOSMIC.GRCh37.vcf.gz
    hg38:  e52e61d97cf7da72101f13790b798665  /diskmnt/Projects/Users/mwyczalk/data/docker/data/B_Filter/dbsnp.noCOSMIC.GRCh38.vcf.gz
        324,422,568 lines, 3.0Gb

    Note that this filter has just the first five columns and is zipped for size

B_Filter on MGI:
    hg19: b39b162de5c9f99b0e7297a2365c700e  /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/dbsnp.noCOSMIC.vcf.gz
    hg38: a6a48d27a89d7ba1a356bede7d588b88  /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/dbsnp.noCOSMIC.GRCh38.vcf.gz
    Documentation / provenance: /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/README.00-All

B_Filter on katmai:
    hg19: 5d57b3acc092d4241a5f5ae92edf3752  /diskmnt/Datasets/dbSNP/SomaticWrapper/B_Filter/dbsnp.noCOSMIC.GRCh37.vcf.gz
    hg38: e52e61d97cf7da72101f13790b798665  /diskmnt/Datasets/dbSNP/SomaticWrapper/B_Filter/dbsnp.noCOSMIC.GRCh38.vcf.gz

Also, another katmai version:
    katmai: - From VCF: "reference=GRCh37.p13"
    d98b7d382f98b0e53aabb316962fae69  /diskmnt/Datasets/COSMIC/gc3027/dinglab/medseq/cosmic/00-All.brief.pass.cosmic.vcf.gz

### dbSnP-COSMIC.GRCh38.d1.vd1

A version of dbSnP-COSMIC specific for the GRCh38.d1.vd1 reference used by GDC is generated on
    denali:/home/mwyczalk_test/Projects/TinDaisy/TinDaisy-Core/image.setup/B_Filter/GRCh38.d1.vd1
    copy on katmai:/diskmnt/Datasets/dbSNP/SomaticWrapper/GRCh38.d1.vd1
and saved to
    denali:/diskmnt/Projects/Users/mwyczalk/data/docker/data/B_Filter/GRCh38.d1.vd1/dbSnP-COSMIC.GRCh38.d1.vd1.vcf.gz
    md5sum: 47a0033b246cd5813c138dc399d51dec

This update carefully maps assembly names using NCBI definitions and uses the latest version of COSMIC (v88) and dbSnP (GCF_000001405.38).
It is saved to katmai:/diskmnt/Datasets/dbSNP/SomaticWrapper/B_Filter/dbSnP-COSMIC.GRCh38.d1.vd1.vcf.gz
and MGI:/gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/dbSnP-COSMIC.GRCh38.d1.vd1.vcf.gz

## dbSnP-COSMIC.GRCh38.d1.vd1.20190416
Careful analysis by Bobo found two problems with results generated above (circa March 2019):
1. `CosmicCodingMuts.v88.UCSC.vcf.gz` was truncated at chrom 2
2. `dbSnP-COSMIC.GRCh38.d1.vd1.vcf.gz` was missing variants which should be there, including chr3:101849859 and chr3:195867389

Detailed discussion of this is on denali here:
    `/diskmnt/Projects/Users/mwyczalk/data/docker/data/B_Filter/GRCh38.d1.vd1/debug.20190416`
This directory is moved to katmai,
    `/diskmnt/Datasets/dbSNP/SomaticWrapper/GRCh38.d1.vd1/debug.20190416`

Resolving this involved simply rerunning steps 4 and 5 above.  This seems to have fixed it.
    To avoid confusion, will rename the final output as, `dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz`
```
md5sum: b8fac55321c36004f0de0448f6540bc1  /diskmnt/Projects/Users/mwyczalk/data/docker/data/B_Filter/GRCh38.d1.vd1/dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz
```

This file is copied to
katmai: /diskmnt/Datasets/dbSNP/SomaticWrapper/B_Filter/dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz
        /diskmnt/Datasets/COSMIC/GRCh38.d1.vd1/dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz
MGI: /gscmnt/gc2521/dinglab/mwyczalk/somatic-wrapper-data/image.data/B_Filter/dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz
compute1: /storage1/fs1/m.wyczalkowski/Active/Resources/Databases/dbSnP-COSMIC/dbSnP-COSMIC.GRCh38.d1.vd1.20190416.vcf.gz

We are DELETING dbSnP-COSMIC.GRCh38.d1.vd1 to avoid incorrectly using it
